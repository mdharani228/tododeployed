{"ast":null,"code":"import{useEffect,useState}from'react';import axios from'axios';import'./todopage.css';// import the CSS\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function TodoPage(){const[user,setUser]=useState(null);const[todos,setTodos]=useState([]);const[text,setText]=useState('');const[editId,setEditId]=useState(null);const[editText,setEditText]=useState('');useEffect(()=>{axios.get('http://localhost:5000/auth/user',{withCredentials:true}).then(res=>setUser(res.data)).catch(()=>window.location.href='/');axios.get('http://localhost:5000/api/todos',{withCredentials:true}).then(res=>setTodos(res.data));},[]);const addTodo=async()=>{if(!text.trim())return;const res=await axios.post('http://localhost:5000/api/todos',{text},{withCredentials:true});setTodos([...todos,res.data]);setText('');};const startEdit=todo=>{setEditId(todo._id);setEditText(todo.text);};const cancelEdit=()=>{setEditId(null);setEditText('');};const saveEdit=async id=>{if(!editText.trim())return;const res=await axios.put(\"http://localhost:5000/api/todos/\".concat(id),{text:editText},{withCredentials:true});setTodos(todos.map(t=>t._id===id?res.data:t));setEditId(null);setEditText('');};const toggleCompleted=async todo=>{const res=await axios.put(\"http://localhost:5000/api/todos/\".concat(todo._id),{completed:!todo.completed},{withCredentials:true});setTodos(todos.map(t=>t._id===todo._id?res.data:t));};const deleteTodo=async id=>{await axios.delete(\"http://localhost:5000/api/todos/\".concat(id),{withCredentials:true});setTodos(todos.filter(t=>t._id!==id));};const logout=()=>{window.open('http://localhost:5000/auth/logout','_self');};if(!user)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});const completedCount=todos.filter(todo=>todo.completed).length;const remainingCount=todos.length-completedCount;return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome back, \",user.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[completedCount,\" of \",todos.length,\" tasks completed\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"logout-button\",children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card total\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Total Tasks\"}),/*#__PURE__*/_jsx(\"p\",{children:todos.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card completed\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Completed\"}),/*#__PURE__*/_jsx(\"p\",{children:completedCount})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card remaining\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Remaining\"}),/*#__PURE__*/_jsx(\"p\",{children:remainingCount})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-task\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"+ Add New Task\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:text,onChange:e=>setText(e.target.value),placeholder:\"What needs to be done?\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addTodo,children:\"+ Add Task\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"task-list\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your Tasks\"}),todos.map(todo=>/*#__PURE__*/_jsxs(\"div\",{className:\"task-item \".concat(todo.completed?'done':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:todo.completed,onChange:()=>toggleCompleted(todo)}),editId===todo._id?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editText,onChange:e=>setEditText(e.target.value)}):/*#__PURE__*/_jsx(\"span\",{onDoubleClick:()=>startEdit(todo),children:todo.text})]}),/*#__PURE__*/_jsx(\"div\",{className:\"right\",children:editId===todo._id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>saveEdit(todo._id),className:\"save\",children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancelEdit,className:\"cancel\",children:\"Cancel\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEdit(todo),className:\"edit\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteTodo(todo._id),className:\"delete\",children:\"Delete\"})]})})]},todo._id))]})]});}export default TodoPage;","map":{"version":3,"names":["useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TodoPage","user","setUser","todos","setTodos","text","setText","editId","setEditId","editText","setEditText","get","withCredentials","then","res","data","catch","window","location","href","addTodo","trim","post","startEdit","todo","_id","cancelEdit","saveEdit","id","put","concat","map","t","toggleCompleted","completed","deleteTodo","delete","filter","logout","open","children","completedCount","length","remainingCount","className","name","onClick","type","value","onChange","e","target","placeholder","checked","onDoubleClick"],"sources":["D:/tododeployed/client/src/components/TodoPage.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport './todopage.css'; // import the CSS\r\n\r\nfunction TodoPage() {\r\n  const [user, setUser] = useState(null);\r\n  const [todos, setTodos] = useState([]);\r\n  const [text, setText] = useState('');\r\n  const [editId, setEditId] = useState(null);\r\n  const [editText, setEditText] = useState('');\r\n\r\n  useEffect(() => {\r\n    axios.get('http://localhost:5000/auth/user', { withCredentials: true })\r\n      .then(res => setUser(res.data))\r\n      .catch(() => window.location.href = '/');\r\n\r\n    axios.get('http://localhost:5000/api/todos', { withCredentials: true })\r\n      .then(res => setTodos(res.data));\r\n  }, []);\r\n\r\n  const addTodo = async () => {\r\n    if (!text.trim()) return;\r\n    const res = await axios.post('http://localhost:5000/api/todos', { text }, { withCredentials: true });\r\n    setTodos([...todos, res.data]);\r\n    setText('');\r\n  };\r\n\r\n  const startEdit = (todo) => {\r\n    setEditId(todo._id);\r\n    setEditText(todo.text);\r\n  };\r\n\r\n  const cancelEdit = () => {\r\n    setEditId(null);\r\n    setEditText('');\r\n  };\r\n\r\n  const saveEdit = async (id) => {\r\n    if (!editText.trim()) return;\r\n    const res = await axios.put(`http://localhost:5000/api/todos/${id}`, { text: editText }, { withCredentials: true });\r\n    setTodos(todos.map(t => (t._id === id ? res.data : t)));\r\n    setEditId(null);\r\n    setEditText('');\r\n  };\r\n\r\n  const toggleCompleted = async (todo) => {\r\n    const res = await axios.put(`http://localhost:5000/api/todos/${todo._id}`, { completed: !todo.completed }, { withCredentials: true });\r\n    setTodos(todos.map(t => (t._id === todo._id ? res.data : t)));\r\n  };\r\n\r\n  const deleteTodo = async (id) => {\r\n    await axios.delete(`http://localhost:5000/api/todos/${id}`, { withCredentials: true });\r\n    setTodos(todos.filter(t => t._id !== id));\r\n  };\r\n\r\nconst logout = () => {\r\n  window.open('http://localhost:5000/auth/logout', '_self');\r\n};\r\n\r\n\r\n  if (!user) return <p>Loading...</p>;\r\n\r\n  const completedCount = todos.filter(todo => todo.completed).length;\r\n  const remainingCount = todos.length - completedCount;\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"header\">\r\n        <div>\r\n          <h2>Welcome back, {user.name}</h2>\r\n          <p>{completedCount} of {todos.length} tasks completed</p>\r\n        </div>\r\n        <button onClick={logout} className=\"logout-button\">Logout</button>\r\n      </div>\r\n\r\n      <div className=\"summary\">\r\n        <div className=\"card total\"><p>Total Tasks</p><p>{todos.length}</p></div>\r\n        <div className=\"card completed\"><p>Completed</p><p>{completedCount}</p></div>\r\n        <div className=\"card remaining\"><p>Remaining</p><p>{remainingCount}</p></div>\r\n      </div>\r\n\r\n      <div className=\"add-task\">\r\n        <h3>+ Add New Task</h3>\r\n        <div className=\"input-group\">\r\n          <input\r\n            type=\"text\"\r\n            value={text}\r\n            onChange={e => setText(e.target.value)}\r\n            placeholder=\"What needs to be done?\"\r\n          />\r\n          <button onClick={addTodo}>+ Add Task</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"task-list\">\r\n        <h3>Your Tasks</h3>\r\n        {todos.map(todo => (\r\n          <div key={todo._id} className={`task-item ${todo.completed ? 'done' : ''}`}>\r\n            <div className=\"left\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={todo.completed}\r\n                onChange={() => toggleCompleted(todo)}\r\n              />\r\n              {editId === todo._id ? (\r\n                <input\r\n                  type=\"text\"\r\n                  value={editText}\r\n                  onChange={e => setEditText(e.target.value)}\r\n                />\r\n              ) : (\r\n                <span onDoubleClick={() => startEdit(todo)}>{todo.text}</span>\r\n              )}\r\n            </div>\r\n            <div className=\"right\">\r\n              {editId === todo._id ? (\r\n                <>\r\n                  <button onClick={() => saveEdit(todo._id)} className=\"save\">Save</button>\r\n                  <button onClick={cancelEdit} className=\"cancel\">Cancel</button>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <button onClick={() => startEdit(todo)} className=\"edit\">Edit</button>\r\n                  <button onClick={() => deleteTodo(todo._id)} className=\"delete\">Delete</button>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TodoPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}